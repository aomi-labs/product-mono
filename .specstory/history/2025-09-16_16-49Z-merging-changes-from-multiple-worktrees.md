<!-- Generated by SpecStory -->

# Merging changes from multiple worktrees (2025-09-16 16:49Z)

_**User (2025-09-16 17:03Z)**_

is i work on branch foo on worktree A and worktree B at the same time, how would i merge it

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Addressing a git question**

I need to answer a git-related question without making code edits. I’ll provide clear steps for merging in the same branch developed across two worktrees. If the commits have diverged, they need to be integrated by committing in each one, followed by pushing/pulling or fetching and merging/rebasing. Since both worktrees are on the same branch, their histories will diverge if used simultaneously. To merge, I can check out the branch in one worktree and merge the commits from the other.
**Clarifying the git merge process**

Since both worktrees are on the same branch 'foo', you can't merge it into itself. Instead, if there are two tips, you can fast-forward one by resetting to the other tip or create a merge commit using `git merge <other-tip-sha>`. In worktree B, commit any changes and create a new branch 'foo-b' if needed. Then in worktree A, commit changes and merge branch B or rebase as necessary. If they diverged, use `git merge <B_tip_sha>` or `git pull --rebase` for the remote. Let's keep it concise with clear commands.
**Merging worktrees effectively**

The user may want to merge worktrees back into one. Since they share the same repository, there’s no special operation needed—just commit changes in both worktrees then integrate them through merge or rebase. I should point out that while working on the same branch in two worktrees is allowed, the last one to update must perform the merge. Examples include using `git rev-parse HEAD` in worktree B and merging that SHA in worktree A. Alternatively, I can create a new branch in B and merge or rebase it in A as needed. A brief summary at the end is important, so I’ll include that!</details></think>

---

### Short answer
You don’t “merge worktrees”; you merge commits/branches. Both worktrees share the same repo. Commit in each worktree, then merge or rebase one tip onto the other from either worktree.

### Two simple ways

- **Merge by SHA (same branch name in both worktrees)**
  1. In worktree B:
     ```bash
     git add -A && git commit -m "B changes"
     git rev-parse HEAD
     ```
     Copy the SHA: `B_SHA`.
  2. In worktree A (on `foo`):
     ```bash
     git add -A && git commit -m "A changes"
     git merge B_SHA
     # resolve conflicts if any
     git commit
     ```
     Optionally push:
     ```bash
     git push
     ```

- **Create a temp branch from B, merge by name**
  1. In worktree B:
     ```bash
     git add -A && git commit -m "B changes"
     git switch -c foo-b
     ```
  2. In worktree A (on `foo`):
     ```bash
     git add -A && git commit -m "A changes"
     git merge foo-b
     # resolve conflicts, then:
     git commit
     ```
     Optionally delete the temp branch afterward:
     ```bash
     git branch -d foo-b
     ```

### Rebase instead of merge (optional)
In worktree A:
```bash
git rebase B_SHA   # or: git rebase foo-b
# resolve conflicts: git add <files>; git rebase --continue
```

### Notes
- Stash or commit before merging/rebasing:
  ```bash
  git stash -u  # if you have uncommitted changes
  ```
- Since both worktrees share the same `.git` object store, you don’t need to fetch to see the other worktree’s commits locally. If you’re collaborating via a remote, push from one and pull/rebase in the other:
  ```bash
  # In B
  git push origin foo
  # In A
  git pull --rebase origin foo
  ```

---

